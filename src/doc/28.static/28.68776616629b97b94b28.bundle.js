webpackJsonp([28],{13:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(),exports.push([module.id,".now-button{display:block;box-sizing:border-box;text-align:center}.now-button.now-button-large{width:200px;height:40px;line-height:40px;border-radius:40px;font-size:16px}.now-button.now-button-middle{width:100px;height:30px;line-height:30px;border-radius:30px;font-size:14px}.now-button.now-button-small{width:80px;height:26px;line-height:26px;border-radius:26px;font-size:12px}.now-button.now-button-type1{border:1px solid #05d380;background-color:transparent;color:#000}.now-button.now-button-type1.pressed,.now-button.now-button-type1:active{opacity:.5}.now-button.now-button-type1.disabled{border-color:#e6e6e6;color:#bbb}.now-button.now-button-type1.disabled:active{opacity:1}.now-button.now-button-type2{background-color:#05d380;color:#fff}.now-button.now-button-type2.pressed,.now-button.now-button-type2:active{opacity:.5}.now-button.now-button-type2.disabled{background-color:#e6e6e6}.now-button.now-button-type2.disabled:active{opacity:1}.now-button.now-button-type3{border:1px solid #333}.now-button.now-button-type3.pressed,.now-button.now-button-type3:active{opacity:.5}.now-button.now-button-type3.disabled{border-color:#e6e6e6}.now-button.now-button-type3.disabled:active{opacity:1}",""])},14:[1833,13],16:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target};__webpack_require__(14);var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),sizeList=["small","large","middle"],Button=function(_Component){function Button(){return _classCallCheck(this,Button),_possibleConstructorReturn(this,_Component.apply(this,arguments))}return _inherits(Button,_Component),Button.prototype.render=function(){var _props=this.props,type=(_props.style,_props.type),size=_props.size,disabled=_props.disabled,className=_props.className,children=_props.children;(type>3||type<0)&&(type=1,console.warn("now-button 允许使用的 type 只有 1 2 3")),sizeList.indexOf(size)<0&&(type="large",console.warn("now-button 支持的 size 只支持 small middle large"));var buttonClass="now-button now-button-type"+type+" now-button-"+size+(className||"");return buttonClass+=disabled?" disabled":"",_react2.default.createElement("div",_extends({},this.props,{className:buttonClass}),children)},Button}(_react.Component);Button.propTypes={type:_react.PropTypes.number,size:_react.PropTypes.string,style:_react.PropTypes.object,disabled:_react.PropTypes.bool},Button.defaultProps={type:1,disabled:!1,size:"large",style:{}},exports.default=Button},47:function(module,exports){"use strict";var eventname={transitionEnd:"onwebkittransitionend"in window?"webkitTransitionEnd":"transitionEnd",animationEnd:"onwebkitanimationend"in window?"webkitAnimationEnd":"animationEnd",touchstart:"ontouchstart"in window?"touchstart":"mousedown",touchmove:"ontouchmove"in window?"touchmove":"mousemove",touchend:"ontouchend"in window?"touchend":"mouseup",touchcancel:"touchcancel",raf:window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return setTimeout(fn,60)}};module.exports=eventname},702:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_sandbox=__webpack_require__(7),_nowBaseButton=__webpack_require__(16),_index=(_interopRequireDefault(_nowBaseButton),__webpack_require__(704)),_index2=_interopRequireDefault(_index),MessageWrapper=function(_Component){function MessageWrapper(){var _ref,_temp,_this,_ret;_classCallCheck(this,MessageWrapper);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=MessageWrapper.__proto__||Object.getPrototypeOf(MessageWrapper)).call.apply(_ref,[this].concat(args))),_this.state={messages:[{eventName:void 0,id:.8139163970785104,text:"绿色直播，封面和直播内容低俗、暴露等将封号！关注手Q公众号【NOW小助手】，了解更多资讯！"}]},_this.mockMessage=function(){return Object.assign({},mockData[Math.floor(mockData.length*Math.random())],{proxySeqno:(new Date).getTime()})},_this.addMessage=function(){var newMessages=_this.state.messages;newMessages.push(_this.mockMessage()),newMessages.length>100&&(newMessages=newMessages.slice(newMessages.length-100)),_this.setState({messages:newMessages})},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(MessageWrapper,_Component),_createClass(MessageWrapper,[{key:"componentDidMount",value:function(){}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return _react2.default.createElement("div",{style:{position:"relative",height:"650"}},_react2.default.createElement("button",{onClick:this.addMessage},"新增一条消息"),_react2.default.createElement(_index2.default,this.state))}}]),MessageWrapper}(_react.Component);exports.default=MessageWrapper;var mockData=[{cmd:390,msg:{head:{random:3579302075,version:0},newMsgBody:{text:{head:{charSet:1,codePage:0,color:16777215,effect:0,fontName:"宋体",pitchAndFamily:0,size:9,time:1473766340},str:"1"}}},msgType:1001,nick:"S'q'B'c WZ'{'x'|'a'?'h'@'o'f'G'u",proxySeqno:17309,roomid:293489628,subcmd:32,uin:2484956107,userType:0,timestamp:1473766343178,eventName:"chatMessage"},{comboCount:3,eventName:"giftMessage",giftPic:"//8.url.cn/huayang/resource/yule/new_gift/ilivenew/memeda9.png",giftType:101,giftid:1101,giftnum:0,proxySeqno:1473766605063,userNick:"adamhe"},{clientType:0,cmd:390,eventName:"enterRoom",medalFace:"https://pub.idqqimg.com/pc/misc/files/20160921/d62d393844cf44c0942311678e51b43c.png",medalId:5,msgType:1002,proxySeqno:102,roomid:289305132,srcNick:"terrywei",srcUin:625171422,subcmd:2,timestamp:1475989847775,userNum:3}];_sandbox.sandboxStore.add("message",MessageWrapper)},704:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(1568);var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_nowMessageType=__webpack_require__(747),_eventname=__webpack_require__(47),AUTO_SCROLL_TIMEOUT=(_interopRequireDefault(_eventname),5e3),shallowCompare=_react2.default.addons.shallowCompare,Message=function(_Component){function Message(props){_classCallCheck(this,Message);var _this=_possibleConstructorReturn(this,(Message.__proto__||Object.getPrototypeOf(Message)).call(this,props));return _this.onPanelTouchStart=function(){_this.autoScrollToBottom=!1,clearTimeout(_this.timer)},_this.onPanelTouchEnd=function(){var innerHeight=parseInt(getComputedStyle(_this.refs.list).getPropertyValue("height").replace("px",""));_this.refs.list.scrollTop+innerHeight>=_this.refs.list.scrollHeight&&(_this.autoScrollToBottom=!0),clearTimeout(_this.timer),_this.timer=setTimeout(function(){_this.autoScrollToBottom=!0;try{_this.refs.list.scrollTop=_this.refs.list.scrollHeight}catch(e){}},AUTO_SCROLL_TIMEOUT)},_this.renderSingleMessage=function(message,index){switch(message.eventName){case _nowMessageType.CHAT_MESSAGE:return _react2.default.createElement("div",{className:"message text-message",key:message.proxySeqno},_react2.default.createElement("span",{className:"author",onClick:function(){return _this.onClickMessage(message)}},message.userNick+":"),_react2.default.createElement("span",{className:"content"},message.text));case _nowMessageType.GIFT_MESSAGE:return _react2.default.createElement("div",{className:"message gift-message",key:message.proxySeqno},_react2.default.createElement("span",{className:"author",onClick:function(){return _this.onClickMessage(message)}},message.userNick),"送了",_react2.default.createElement("span",{className:"count"}," x "+message.giftnum),"个",_react2.default.createElement("i",{className:"gift-icon",style:{backgroundImage:"url("+message.giftPic+")"}}));case _nowMessageType.ENTER_ROOM:return _react2.default.createElement("div",{className:"message system-message enter",key:message.proxySeqno},_react2.default.createElement("span",{className:"author",onClick:function(){return _this.onClickMessage(message)}},message.userNick)," 来了");case _nowMessageType.FOCUS_MESSAGE:return _react2.default.createElement("div",{className:"message system-message",key:message.proxySeqno},_react2.default.createElement("span",{className:"author",onClick:function(){return _this.onClickMessage(message)}},message.userNick)," 关注了主播");case _nowMessageType.PLAY_STATE_CHANGE:return _react2.default.createElement("div",{className:"message broadcast-message",key:message.id},message.text);case _nowMessageType.NOTICE:return _react2.default.createElement("div",{className:"message broadcast-message",key:message.id},"系统提示："+message.text);default:return null}},_this.autoScrollToBottom=!0,_this.timer=null,_this}return _inherits(Message,_Component),_createClass(Message,[{key:"componentDidUpdate",value:function(){if(this.autoScrollToBottom)try{this.refs.list.scrollTop=this.refs.list.scrollHeight}catch(e){}}},{key:"shouldComponentUpdate",value:function(nextProps,nextState){return shallowCompare(this,nextProps,nextState)}},{key:"onClickMessage",value:function(message){this.props.onClickMessage(message)}},{key:"render",value:function(){var messages=this.props.messages;return _react2.default.createElement("section",{id:"messages",ref:"list",onTouchStart:this.onPanelTouchStart,onTouchEnd:this.onPanelTouchEnd},messages.map(this.renderSingleMessage))}}]),Message}(_react.Component);exports.default=Message,Message.propTypes={messages:_react.PropTypes.array}},747:function(module,exports){"use strict";exports.__esModule=!0;exports.CHAT_MESSAGE="chatMessage",exports.GIFT_MESSAGE="giftMessage",exports.ENTER_ROOM="enterRoom",exports.LEAVE_ROOM="leaveRoom",exports.ROOM_INFO_CHANGE="roomInfoChange",exports.KICK_OUT="kickOut",exports.PLAY_STATE="playState",exports.PLAY_STATE_CHANGE="playStateChange",exports.NOTICE="notice",exports.FOCUS_MESSAGE="focusMessage",exports.ROOM_ACT_MESSAGE="roomAct"},1167:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(),exports.push([module.id,"#messages{position:absolute;bottom:66px;left:7px;width:290px;max-height:145px;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch}#messages::-webkit-scrollbar{display:none}#messages .message{line-height:24px;font-size:16px;text-shadow:0 .5px 1px rgba(0,0,0,.5)}#messages .message.text-message .author{color:#a7efda;margin-right:8px}#messages .message.text-message .content{color:#fff;word-break:break-all}#messages .message.gift-message{color:#ff9893}#messages .message.gift-message .author{color:#ffe891;margin-right:6px}#messages .message.gift-message i.gift-icon{margin-left:3px;display:inline-block;vertical-align:middle;background-size:auto 20px;background-position:0;background-repeat:no-repeat;width:50px;height:20px}#messages .message.system-message{color:#ff9893}#messages .message.system-message .author{color:#ffe891}#messages .message.system-message.enter{color:#e0f2cf}#messages .message.broadcast-message{color:#a7efda}#messages span.author{word-break:break-all}",""])},1568:[1833,1167],1833:function(module,exports,__webpack_require__,__webpack_module_template_argument_0__){var content=__webpack_require__(__webpack_module_template_argument_0__);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(4)(content,{});content.locals&&(module.exports=content.locals)}});
//# sourceMappingURL=28.68776616629b97b94b28.bundle.js.map