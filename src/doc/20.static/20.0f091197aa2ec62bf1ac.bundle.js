webpackJsonp([20],{2:function(module,exports){"use strict";function getUa(){return"undefined"!=typeof navigator&&navigator&&navigator.userAgent||""}function Up(str){return str.replace(/^./,function(ch){return ch.toUpperCase()})}function compare(a,b){var i,l,r,len;for(a=String(a).split("."),b=String(b).split("."),i=0,len=Math.max(a.length,b.length);i<len;i++){if(l=isFinite(a[i])&&Number(a[i])||0,r=isFinite(b[i])&&Number(b[i])||0,l<r)return-1;if(l>r)return 1}return 0}var regexp=[["IOS",/\b(iPad|iPhone|iPod)\b.*? OS ([\d_]+)/,2],["android",/\bAndroid\s*([^;]+)/],["QQBrowser",/\bMQQBrowser\/([\d\.]+)/],["nowSDK",/\bNowSDK\/([\d\.]*)/i],["QQ",/\bQQ\/([\d\.]+)/],["weixin",/\bMicroMessenger\/([\d\.]*)/],["now",/\bNow\/(\d+|LocalCompiled)/],["nowDev",/\bNow\/LocalCompiled/],["jiaoyou",/\bODApp\/([\d\.]+|LocalCompiled)/],["jiaoyouDev",/\bODApp\/LocalCompiled/],["huayang",/\bhuayangapp\/([\d\.]*)/],["qzone",/\bQzone\/\w*_([\d\.]+)/],["comicReader",/\bQQAC_Client(_\w+)?\/([\d\.]*)/i],["weibo",/\bweibo/i]],entry={userAgent:getUa,init:function(){var _this=this;regexp.forEach(function(args){_this.addItem.apply(_this,args)}),this.platform=this.isIOS?"ios":this.isAndroid?"android":"pc",regexp.forEach(function(args){var name=args[0];_this["is"+Up(name)]&&(_this.type=name)}),this.netType=getUa().match(/NetType\/(\w+)/i)&&RegExp.$1.toUpperCase(),this.model=getUa().match(/\(.*;\s?(\S*?\s?\S*?)\s?(Build)?\//i)&&RegExp.$1},addItem:function(name,exp){var verPos=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,match=getUa().match(exp),version=(match&&match[verPos]||"").replace(/_/g,".")||null;this["is"+Up(name)]=!!match,this[name+"Version"]=version,this[name+"Upper"]=this._upper.bind(this,name),this[name+"Lower"]=this._lower.bind(this,name),this[name+"Compare"]=this._compare.bind(this,name)},_upper:function(name,ver){var v=this.version(name);return v&&compare(v,ver)>=0||!1},_lower:function(name,ver){var v=this.version(name);return v&&compare(v,ver)<=0||!1},_compare:function(name,ver){var v=this.version(name);return v?compare(v,ver):-2},version:function(name){return this[name+"Version"]||null}};entry.init(),module.exports=entry},9:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getUrl(url,param){return param&&(url=url+(url.match(/\?/)?"&":"?")+getParam(param)),url}function getParam(obj){var str=[];for(var k in obj)if(obj.hasOwnProperty(k)){var v="undefined"!=typeof obj[k]?obj[k]:"";str.push(encodeURIComponent(k)+"="+encodeURIComponent(v))}return str.join("&")}function callByLocaiton(url,param){url=getUrl(url,param),window.location=url}function callByIframe(url,param){url=getUrl(url,param);var iframe=document.createElement("iframe"),body=document.getElementsByTagName("body")[0];body.appendChild(iframe);var style={position:"fixed",zIndex:-1,left:0,right:0,width:0,height:0,margin:0,padding:0,border:"none",opacity:0,visibility:"hidden"};for(var k in style)iframe.style[k]=style[k];iframe.src=url,setTimeout(function(){body.removeChild(iframe)},2e3)}function callProto(url,param){navigator.userAgent.match(/\bSafari\/\S+$/)&&navigator.userAgent.match(/\b(iPhone|iPad|iPod)\b/)?callByLocaiton(url,param):callByIframe(url,param)}var _device=__webpack_require__(2),callWithPromise=(_interopRequireDefault(_device),function(){var callBackCount=0;return function(url){var opts=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(resolve,reject){var callbackName="";opts.callback?callbackName=opts.callback:(callbackName="FAKEPRO_CALLBACK_"+callBackCount++,opts.callback=callbackName),window[callbackName]=function(data){resolve(data),delete window[callbackName]},callProto(url,opts)})}}());module.exports={getUrl:getUrl,call:callProto,callByLocaiton:callByLocaiton,callByIframe:callByIframe,callWithPromise:callWithPromise}},11:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}var hasOwn={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=classNames:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},12:function(module,exports){"use strict";function EventEmitter(){}function indexOfListener(listeners,listener){for(var i=listeners.length;i--;)if(listeners[i].listener===listener)return i;return-1}function alias(name){return function(){return this[name].apply(this,arguments)}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj},proto=EventEmitter.prototype,originalGlobalValue=exports.EventEmitter;proto.getListeners=function(evt){var response,key,events=this._getEvents();if(evt instanceof RegExp){response={};for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&(response[key]=events[key])}else response=events[evt]||(events[evt]=[]);return response},proto.flattenListeners=function(listeners){var i,flatListeners=[];for(i=0;i<listeners.length;i+=1)flatListeners.push(listeners[i].listener);return flatListeners},proto.getListenersAsObject=function(evt){var response,listeners=this.getListeners(evt);return listeners instanceof Array&&(response={},response[evt]=listeners),response||listeners},proto.addListener=function(evt,listener){var key,listeners=this.getListenersAsObject(evt),listenerIsWrapped="object"===("undefined"==typeof listener?"undefined":_typeof(listener));for(key in listeners)listeners.hasOwnProperty(key)&&indexOfListener(listeners[key],listener)===-1&&listeners[key].push(listenerIsWrapped?listener:{listener:listener,once:!1});return this},proto.on=alias("addListener"),proto.addOnceListener=function(evt,listener){return this.addListener(evt,{listener:listener,once:!0})},proto.once=alias("addOnceListener"),proto.defineEvent=function(evt){return this.getListeners(evt),this},proto.defineEvents=function(evts){for(var i=0;i<evts.length;i+=1)this.defineEvent(evts[i]);return this},proto.removeListener=function(evt,listener){var index,key,listeners=this.getListenersAsObject(evt);for(key in listeners)listeners.hasOwnProperty(key)&&(index=indexOfListener(listeners[key],listener),index!==-1&&listeners[key].splice(index,1));return this},proto.off=alias("removeListener"),proto.addListeners=function(evt,listeners){return this.manipulateListeners(!1,evt,listeners)},proto.removeListeners=function(evt,listeners){return this.manipulateListeners(!0,evt,listeners)},proto.manipulateListeners=function(remove,evt,listeners){var i,value,single=remove?this.removeListener:this.addListener,multiple=remove?this.removeListeners:this.addListeners;if("object"!==("undefined"==typeof evt?"undefined":_typeof(evt))||evt instanceof RegExp)for(i=listeners.length;i--;)single.call(this,evt,listeners[i]);else for(i in evt)evt.hasOwnProperty(i)&&(value=evt[i])&&("function"==typeof value?single.call(this,i,value):multiple.call(this,i,value));return this},proto.removeEvent=function(evt){var key,type="undefined"==typeof evt?"undefined":_typeof(evt),events=this._getEvents();if("string"===type)delete events[evt];else if(evt instanceof RegExp)for(key in events)events.hasOwnProperty(key)&&evt.test(key)&&delete events[key];else delete this._events;return this},proto.removeAllListeners=alias("removeEvent"),proto.emitEvent=function(evt,args){var listeners,listener,i,key,response,listenersMap=this.getListenersAsObject(evt);for(key in listenersMap)if(listenersMap.hasOwnProperty(key))for(listeners=listenersMap[key].slice(0),i=listeners.length;i--;)listener=listeners[i],listener.once===!0&&this.removeListener(evt,listener.listener),response=listener.listener.apply(this,args||[]),response===this._getOnceReturnValue()&&this.removeListener(evt,listener.listener);return this},proto.trigger=alias("emitEvent"),proto.emit=function(evt){var args=Array.prototype.slice.call(arguments,1);return this.emitEvent(evt,args)},proto.setOnceReturnValue=function(value){return this._onceReturnValue=value,this},proto._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},proto._getEvents=function(){return this._events||(this._events={})},EventEmitter.noConflict=function(){return exports.EventEmitter=originalGlobalValue,EventEmitter},module.exports=EventEmitter},15:function(module,exports){"use strict";var entry={options:{isHttps:"undefined"!=typeof location&&location&&!!location.href.match(/^https/),httpsProxySvr:"//proxy.now.qq.com/tx_tls_gate=",httpsProxy:{"isdspeed.qq.com":!0,"c.isdspeed.qq.com":!0}},cfg:function(options){for(var k in options)options.hasOwnProperty(k)&&(entry.options[k]=options[k])},send:function(url,p){var domain=url.match(/\/\/([^\/]+)/)&&RegExp.$1||"",options=entry.options;p=p||{},p._=Math.random(),url=url.replace(/^https?:/,""),options.isHttps&&options.httpsProxy[domain]&&(url=options.httpsProxySvr+url.replace(/^(https?:)?\/\//,""));var _url=url+(url.match(/\?/)?"&":"?")+entry.param(p);_url.length>2048?entry._postSend(url,p):(new Image).src=_url},_postSend:function(url,p){p=p||{};var body=document.body,ifr=document.createElement("iframe");ifr.style.display="none",ifr.src="about:blank",ifr.name="tmp"+Math.random().toString().substr(2,10),body.appendChild(ifr);var fm=document.createElement("form");fm.method="post",fm.action=url,fm.target=ifr.name,fm.enctype="application/x-www-form-urlencoded",fm.style.display="none";for(var k in p)if(p.hasOwnProperty(k)){var input=document.createElement("input");input.type="hidden",input.name=k,input.value=p[k],fm.appendChild(input)}body.appendChild(fm),setTimeout(function(){fm.submit()},50),setTimeout(function(){body.removeChild(fm),body.removeChild(ifr)},3e3)},param:function(p){var str=[];for(var k in p)if(p.hasOwnProperty(k)){var v="undefined"==typeof p[k]?"":p[k];str.push(encodeURIComponent(k)+"="+encodeURIComponent(v))}return str.join("&")},getUrl:function(url,p){var pstr=entry.param(p||{});return url+(pstr?(url.match(/\?/)?"&":"?")+pstr:"")}};module.exports=entry},17:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function loadScript(opts){"string"==typeof opts&&(opts={url:opts});var url=opts.url;return loadScript.loading=loadScript.loading||{},loadScript.loading[url]=loadScript.loading[url]||new Promise(function(resolve,reject){var script=document.createElement("script"),onload=function(){setTimeout(resolve,30)};"onload"in script?script.onload=onload:script.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||onload()},script.onerror=reject,script.type="text/javascript",script.async=!1,opts.crossOrigin&&(script.crossOrigin="anonymous"),script.src=url,document.getElementsByTagName("head")[0].appendChild(script)}).catch(function(){return opts.retry?(loadScript.loading[url]=null,loadScript(Object.assign({},opts,{retry:!1}))):Promise.reject()})}var _device=__webpack_require__(2),_device2=_interopRequireDefault(_device);exports.mqq=function(calls){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var url=window.pack?"//8.url.cn/now/lib/4/qqapi.js?_bid=2400":"//8.url.cn/now/lib/4/qqapi.js";return _device2.default.isQzone&&(url="//8.url.cn/now/lib/4/qqapi.js?_offline=1"),(window.mqq&&mqq.version?Promise.resolve():loadScript({url:url,retry:!0,crossOrigin:!window.pack})).then(function(){if(calls){var p=calls.split(/\./),obj=window.mqq,method=p[p.length-1];if(!obj)return console.log("mqq 加载失败"),Promise.reject();p.slice(0,-1).forEach(function(name){obj=obj[name]}),obj[method].apply(obj,args)}return window.mqq})},exports.weixin=function(){var args=[].slice.call(arguments);return new Promise(function(resolve,reject){function succ(){"undefined"!=typeof window.WeixinJSBridge&&"function"==typeof window.WeixinJSBridge.invoke?(resolve&&resolve(window.WeixinJSBridge),resolve=null):console.log("WeixinJSBridge 加载失败")}document.addEventListener?document.addEventListener("WeixinJSBridgeReady",succ,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",succ),document.attachEvent("onWeixinJSBridgeReady",succ)),succ()}).then(function(jsbridge){return args.length&&jsbridge.invoke.apply(jsbridge,args),jsbridge})},exports.wx=function(calls){for(var _len2=arguments.length,args=Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return(window.wx?Promise.resolve():loadScript({url:"//res.wx.qq.com/open/js/jweixin-1.1.0.js",retry:!0})).then(function(){if(calls){var p=calls.split(/\./),obj=window.wx,method=p[p.length-1];window.wx||(console.log("wx 加载失败"),Promise.reject()),p.slice(0,-1).forEach(function(name){obj=obj[name]}),obj[method].apply(obj,args)}return window.wx})}},22:function(module,exports,__webpack_require__){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},EventEmitter=__webpack_require__(12),device=__webpack_require__(2),fakePro=__webpack_require__(9),mqq=__webpack_require__(17).mqq,Entry=function(_EventEmitter){function Entry(){_classCallCheck(this,Entry);var _this=_possibleConstructorReturn(this,_EventEmitter.call(this));return _this.visibilityState="visible",_this.bind(),_this}return _inherits(Entry,_EventEmitter),Entry.prototype.isHidden=function(){return!!this.visibilityState.match(/hidden/)},Entry.prototype.bind=function(){var _this2=this,isNowSDK=!!location.href.match(/^[^?]*\/story\.html\b/)||device.isNowSDK;isNowSDK||device.isNow?(window._visibilityChange=function(result){try{result=JSON.parse(result)}catch(ex){}result&&result.result&&_this2.setState(1!==result.result.state?"hidden":"visible")},setTimeout(function(){fakePro.call("jsbridge://event/addEventListener",{name:"visibilitychange",callback:"_visibilityChange"})},1e3)):device.isQQ||device.isQzone&&device.isIOS?mqq("addEventListener","qbrowserVisibilityChange",function(e){_this2.setState(e.hidden?"hidden":"visible")}):document.addEventListener("visibilitychange",function(){_this2.setState(document.visibilityState.match(/hidden/)?"hidden":"visible")})},Entry.prototype.setState=function(state){state!==this.visibilityState&&(this.visibilityState=state,this.emit("visibilitychange",state),this.emit("change",state))},Entry}(EventEmitter);module.exports=new Entry},37:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.__esModule=!0;var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),loadedImages={},ImageLoader=function(_Component){function ImageLoader(props,context){_classCallCheck(this,ImageLoader);var _this=_possibleConstructorReturn(this,_Component.call(this,props,context));return _this.getImageUrl=function(){var imageUrl="";return imageUrl="error"===_this.state.visable?_this.props.errorImg||_this.state.errorSrc||_this.props.placeholder:_this.props.forceShow?_this.props.src:_this.state.visable&&_this.props.src?_this.props.src:_this.props.placeholder},_this.load=function(src){if(src){_this.props.onStart&&_this.props.onStart(_this),ImageLoader.onStartCallback&&ImageLoader.onStartCallback(src,_this);var succ=function(){loadedImages[src]=!0,_this.mounted&&_this.props.src===src&&(_this.setState({visable:!0}),_this.props.onLoad&&_this.props.onLoad(src,_this)),ImageLoader.onLoadCallback&&ImageLoader.onLoadCallback(src,_this)},err=function(){_this.mounted&&_this.props.src===src&&(_this.setState({visable:"error"}),_this.props.onError&&_this.props.onError(src,_this)),console.error("LazyLoad image load error",src),ImageLoader.onErrorCallback&&ImageLoader.onErrorCallback(src,_this)};if(loadedImages[src])_this.setState({visable:!0}),setTimeout(succ,10);else{var img=new Image;img.onload=succ,img.onerror=err,img.src=src}}},_this.state={visable:!1},_this}return _inherits(ImageLoader,_Component),ImageLoader.onStart=function(cb){ImageLoader.onStartCallback=cb},ImageLoader.onLoad=function(cb){ImageLoader.onLoadCallback=cb},ImageLoader.onError=function(cb){ImageLoader.onErrorCallback=cb},ImageLoader.prototype.componentWillReceiveProps=function(nextProps){var props=this.props;this.state;nextProps.src!==props.src&&(this.state.visable=!1,this.load(nextProps.src))},ImageLoader.prototype.componentDidMount=function(){this.props,this.state;this.mounted=!0,this.load(this.props.src)},ImageLoader.prototype.componentWillUnmount=function(){this.mounted=!1},ImageLoader.prototype.setErrorSrc=function(src){this.mounted&&this.setState({errorSrc:src})},ImageLoader.prototype._addSrcToAttr=function(attr,tag){var src=this.getImageUrl();"img"===tag?attr.src=src:attr.style=Object.assign({},attr.style,{backgroundImage:"url("+src+")"})},ImageLoader.prototype.render=function(){var _this2=this,props=(this.state,this.props),tag="error"===this.state.visable?"div":props.tag,attr=Object.assign({},props||{},{tag:void 0,src:void 0,placeholder:void 0,ref:function(c){_this2.node=c}});return this._addSrcToAttr(attr,tag),_react2.default.createElement(tag,attr,this.props.children||null)},ImageLoader}(_react.Component);ImageLoader.defaultProps={tag:"div",forceShow:!1,placeholder:"",src:"",errorImg:""},ImageLoader.propTypes={tag:_react.PropTypes.string,forceShow:_react.PropTypes.bool,placeholder:_react.PropTypes.string,src:_react.PropTypes.string,children:_react.PropTypes.node},exports.default=ImageLoader},38:function(module,exports,__webpack_require__){"use strict";var txSend=__webpack_require__(15);module.exports={extend:function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},isArray:function(obj){return obj&&"[object Array]"===Object.prototype.toString.call(obj)},param:txSend.param,send:txSend.send}},63:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(name,definition){"undefined"!=typeof module&&module.exports?module.exports=definition():(__WEBPACK_AMD_DEFINE_FACTORY__=definition,__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof __WEBPACK_AMD_DEFINE_FACTORY__?__WEBPACK_AMD_DEFINE_FACTORY__.call(exports,__webpack_require__,exports,module):__WEBPACK_AMD_DEFINE_FACTORY__,!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}("$script",function(){function every(ar,fn){for(var i=0,j=ar.length;i<j;++i)if(!fn(ar[i]))return f;return 1}function each(ar,fn){every(ar,function(el){return!fn(el)})}function $script(paths,idOrDone,optDone){function loopFn(item){return item.call?item():list[item]}function callback(){if(!--queue){list[id]=1,done&&done();for(var dset in delay)every(dset.split("|"),loopFn)&&!each(delay[dset],loopFn)&&(delay[dset]=[])}}paths=paths[push]?paths:[paths];var idOrDoneIsDone=idOrDone&&idOrDone.call,done=idOrDoneIsDone?idOrDone:optDone,id=idOrDoneIsDone?paths.join(""):idOrDone,queue=paths.length;return setTimeout(function(){each(paths,function loading(path,force){return null===path?callback():(force||/^https?:\/\//.test(path)||!scriptpath||(path=path.indexOf(".js")===-1?scriptpath+path+".js":scriptpath+path),scripts[path]?(id&&(ids[id]=1),2==scripts[path]?callback():setTimeout(function(){loading(path,!0)},0)):(scripts[path]=1,id&&(ids[id]=1),void create(path,callback)))})},0),$script}function create(path,fn){var loaded,el=doc.createElement("script");if(el.onload=el.onerror=el[onreadystatechange]=function(){el[readyState]&&!/^c|loade/.test(el[readyState])||loaded||(el.onload=el[onreadystatechange]=null,loaded=1,scripts[path]=2,fn())},config&&"[object Object]"===Object.prototype.toString.call(config))for(var key in config)if(config.hasOwnProperty(key)){var value=config[key];value=value===!0?"":value,el.setAttribute(key.toLowerCase(),value)}el.src=urlArgs?path+(path.indexOf("?")===-1?"?":"&")+urlArgs:path,head.insertBefore(el,head.lastChild)}var scriptpath,urlArgs,config,doc=document,head=doc.getElementsByTagName("head")[0],f=!1,push="push",readyState="readyState",onreadystatechange="onreadystatechange",list={},ids={},delay={},scripts={};return $script.get=create,$script.order=function(scripts,id,done){!function callback(s){s=scripts.shift(),scripts.length?$script(s,callback):$script(s,id,done)}()},$script.path=function(p){scriptpath=p},$script.urlArgs=function(str){urlArgs=str},$script.ready=function(deps,ready,req){deps=deps[push]?deps:[deps];var missing=[];return!each(deps,function(dep){list[dep]||missing[push](dep)})&&every(deps,function(dep){return list[dep]})?ready():!function(key){delay[key]=delay[key]||[],delay[key][push](ready),req&&req(missing)}(deps.join("|")),$script},$script.done=function(idOrDone){$script([null],idOrDone)},$script.config=function(option){config=option},$script})},105:function(module,exports,__webpack_require__){"use strict";function DB(option){var self=function self(){self._execute.apply(self,arguments)};for(var k in DB.prototype)self[k]=DB.prototype[k];return self.constructor=DB,self.option=option||{},self}function _mergeOption(target){var args=[].slice.call(arguments,1);for(var i in args){var item=args[i];for(var k in item){var value=item[k];["before","succ","err"].indexOf(k)!==-1?target[k]=(target[k]||[]).concat(_.isArray(value)?value:[value]):target[k]=value}}return target}function Sender(option){this.option=option||{}}var _typeof2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof="function"==typeof Symbol&&"symbol"===_typeof2(Symbol.iterator)?function(obj){return"undefined"==typeof obj?"undefined":_typeof2(obj)}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol?"symbol":"undefined"==typeof obj?"undefined":_typeof2(obj)},_=__webpack_require__(38),fetch=__webpack_require__(107);DB.prototype._execute=function(){this.ajax.apply(this,arguments)},DB.prototype.ajax=function(option){return new Sender(_mergeOption({succ:[],err:[],before:[]},DB.option||{},this.option||{},option||{})).send()},Sender.prototype.send=function(){var self=this,option=this.option;if(self.processBefore(),self.sendAt=+new Date,fetch(_.extend({},option,{complete:function(data,xhr){option.dataType&&"JSONP"===option.dataType.toUpperCase()?option.localEnable?self.responseText=JSON.stringify(data):self.responseText="":self.responseText=xhr.responseText,self.response=data,self.processSucc(data)}})),window.Promise)return new Promise(function(resolve,reject){self.option.succ.push(resolve),self.option.err.push(reject)})},Sender.prototype.processBefore=function(){for(var i=0;this.option.before&&i<this.option.before.length;i++)this.option=this.option.before[i].call(this,i)||this.option},Sender.prototype.processSucc=function(data){for(var succ=!0,i=0;this.option.succ&&i<this.option.succ.length;i++){var ret=this.option.succ[i].call(this,data,i);if(ret===!1){succ=!1;break}"object"===("undefined"==typeof ret?"undefined":_typeof(ret))&&(data=ret)}!succ&&this.processErr(data)},Sender.prototype.processErr=function(data){for(var i=0;this.option.err&&i<this.option.err.length;i++)this.option.err[i].call(this,data,i)},_.extend(DB,{httpMethod:function(option){return new DB(option)},ajax:function(option){return(new DB)(option)},extend:function(){var args=[].slice.call(arguments);return args.unshift(this),$.extend.apply($,args)},mergeOption:function(){var args=[].slice.call(arguments);args.unshift(this.option),this.option=_mergeOption.apply(null,args)},option:{}}),module.exports=DB},106:function(module,exports,__webpack_require__){"use strict";function encryptSkey(str){if(!str)return"";for(var hash=5381,i=0,len=str.length;i<len;++i)hash+=(hash<<5)+str.charAt(i).charCodeAt();return 2147483647&hash}function getCookie(n){var m=document.cookie.match(new RegExp("(^| )"+n+"=([^;]*)(;|$)"));return m?decodeURIComponent(m[2]):""}function uin(){var u=getCookie("uin");return u&&parseInt(u.substring(1,u.length),10)||null}function getLocalKey(option){if(option.localKey)return option.localKey;var qs=[],data=option.data||{};for(var k in data)if(data.hasOwnProperty(k)){var v=data[k];isSerializationParam(k,v)&&qs.push(k+"="+v.toString())}return option.url+(option.url.match(/\?/)?"":"?")+qs.sort().join("&")}function isSerializationParam(key,value){return!key.match(/^_/)&&!key.match(/^(t|bkn)$/)&&void 0!==value&&null!==value&&value.toString().length<100}function setItem(key,data,raw){try{localStorage.setItem(key,raw?data:JSON.stringify(data))}catch(ex){localStorage.removeItem(key)}}function getItem(key){try{return JSON.parse(localStorage.getItem(key)||"null")}catch(ex){return localStorage.removeItem(key),null}}function doRetCodeReport(){var url="//report.huatuo.qq.com/code.cgi",fields=["domain","cgi","type","code","time","rate"];if(retCodePool.length){var items=retCodePool.splice(0,10),param={uin:uin()||"",key:fields.join(","),appid:20149,platform:device.isIOS?"ios":device.isAndroid?"android":"unknown",apn:device.netType?device.netType.toLowerCase():"unknown"};for(var i in items){var item=items[i];for(var j in fields){var k=fields[j];param[+i+1+"_"+(+j+1)]="undefined"!=typeof item[k]?item[k]:""}}_.send(url,param),retCodePool.length&&setTimeout(doRetCodeReport,100)}}var _=__webpack_require__(38),device=__webpack_require__(2),ext=module.exports={before:{},succ:{},err:{}};ext.before.bkn=function(){this.option.data=this.option.data||{};var a2Cookie=getCookie("ilive_a2");a2Cookie?this.option.data.bkn=encryptSkey(a2Cookie):this.option.data.bkn=encryptSkey(getCookie("skey"))};var _localUsed={};ext.before.local=function(){if(window.localStorage){var option=this.option,key=getLocalKey(option),cache=getItem(key);cache&&!_localUsed[key]&&(_localUsed[key]=!0,cache._isLocal=!0,this.processSucc(cache)),option.succ=(option.succ||[]).concat(function(data){data._isLocal||setItem(key,this.responseText||"",!0)})}},ext.before.local.option={localEnable:!1},ext.succ.retCode=function(data){return 0===this.option.getRetCode(data)};var retCodePool=[];ext.succ.retCodeReport=function(data){var retCode=this.option.getRetCode(data),match=this.option.url.match(/^(https?:)?\/\/([^\/]+)([^?]*)?/),domain=match?match[2]:location.hostname,cgi=match?match[3]||"/":this.option.url;retCodePool.push({domain:domain,cgi:cgi,type:0===retCode?1:2,code:retCode,time:+new Date-this.sendAt,rate:1}),setTimeout(doRetCodeReport,1e3)}},107:function(module,exports,__webpack_require__){"use strict";function _ajax(options){function success(){var data=xhr.responseText||"";"JSON"===options.dataType&&(data=JSON.parse(data)),options.success&&options.success(data,xhr)}function error(){options.error&&options.error(xhr)}var url=options.url,xhr=new XMLHttpRequest;options.data._=Math.random(),xhr.timeout=1e6,xhr.onreadystatechange=function(){4===xhr.readyState&&(200===xhr.status?success():error())},"GET"===options.type?(url=appendQuery(url,options.data||{}),xhr.open("GET",url,!0)):xhr.open("POST",url,!0);try{xhr.withCredentials=options.withCredentials}catch(e){}if((options.contentType||"POST"===options.type)&&xhr.setRequestHeader("Content-Type",options.contentType||"application/x-www-form-urlencoded"),options.headers)for(var name in options.headers)xhr.setRequestHeader(name,options.headers[name]);xhr.send("GET"===options.type?null:_.param(options.data||{})),setTimeout(function(){4!==xhr.readyState&&(xhr._status=0,xhr.abort())},options.timeout)}function appendQuery(url,data){return data?url+(url.match(/\?/)?"&":"?")+_.param(data):url}var _=__webpack_require__(38);module.exports=function(options){options=_.extend({url:"",data:{},dataType:"JSON",type:"GET",withCredentials:!0,timeout:2e4},options||{}),options.type=options.type.toUpperCase(),options.dataType=options.dataType.toUpperCase(),options.success=function(data,xhr){options.complete&&options.complete(data,xhr)},options.error=function(xhr){options.complete&&options.complete({networkError:!0,retcode:xhr._status||xhr.status||0,status:xhr._status||xhr.status||0},xhr)},window.Preload?window.Preload.get(options,function(data,xhr){data?setTimeout(function(){options.success(data,xhr)},1):ajax(options)}):ajax(options)};var ajax=window.jQuery&&jQuery.ajax||window.Zepto&&Zepto.ajax||function(options){if("JSONP"===options.dataType)throw new Error("UNSUPPORT JSONP");_ajax(options)}},108:function(module,exports,__webpack_require__){"use strict";var _=__webpack_require__(38),DB=__webpack_require__(105),ext=__webpack_require__(106),defaultOption={type:"POST",dataType:"json",cache:!1,getRetCode:function(data){var fields=["retcode","ec","errCode","code"];if(data)for(var i in fields){var name=fields[i];if(!isNaN(data[name]))return data[name]}}};(!navigator.userAgent.match(/\bMSIE\s([\d\.]+)/)||+RegExp.$1>8)&&(defaultOption.xhrFields={withCredentials:!0}),DB.mergeOption(defaultOption);var addExtension=function(name,stage,handle){var conf={},enableKey=handle.enableKey||name+"Enable";conf[enableKey]=!0,_.extend(conf,handle.option||{}),conf[stage]=function(){if(this.option[enableKey])return handle.apply(this,arguments)},DB.mergeOption(conf)};addExtension("bkn","before",ext.before.bkn),addExtension("local","before",ext.before.local),addExtension("retCodeReport","succ",ext.succ.retCodeReport),addExtension("retCode","succ",ext.succ.retCode),
DB.addExtension=addExtension,module.exports=DB},126:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(),exports.push([module.id,"#player-container{position:absolute;left:0;top:0;bottom:0;right:0;overflow:hidden}#player-container video{display:block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);min-height:100%;min-width:100%;height:auto;width:auto}#player-container video::-webkit-media-controls{display:none!important}#player-container video::-webkit-media-controls-panel,#player-container video::\\--webkit-media-controls-play-button{display:none!important;-webkit-appearance:none}#player-container video::-webkit-media-controls-start-playback-button{display:none!important;-webkit-appearance:none}#player-container video.setsize{transform:none;min-width:auto;min-height:auto}",""])},158:[1842,126],216:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!==("undefined"==typeof call?"undefined":_typeof(call))&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof superClass?"undefined":_typeof(superClass)));subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};exports.__esModule=!0;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(158);var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_device=__webpack_require__(2),_device2=_interopRequireDefault(_device),_nowScriptjs=__webpack_require__(63),_nowScriptjs2=_interopRequireDefault(_nowScriptjs),ERR_MAP={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},Video=function(_Component){function Video(props){_classCallCheck(this,Video);var _this=_possibleConstructorReturn(this,_Component.call(this,props));return _this.initHlsJs=function(){if("undefined"!=typeof Hls&&Hls.isSupported()&&"hls"===_this.videoType()){var hls=new Hls({});_this.hls=hls,_this.hls.attachMedia(_this.video),_this.hls.on(Hls.Events.MANIFEST_PARSED,function(){_this.video.play()}),_this.hlsLoad(_this.props.src)}},_this.hlsLoad=function(src){_this.hls&&src&&_this.hls.loadSource(src)},_this.play=function(){_this.video.play()},_this.load=function(){_this.video.load()},_this.pause=function(){_this.video.pause()},_this.setSizeForLowerDevice=function(){(_device2.default.IOSLower("7.9")||_device2.default.isMiui||_this.isMZMXBrowser)&&_this._setSizeForLowerDevice(_this.video)},_this.videoType=function(src){return src=src||_this.props.src,src?/\.m3u8/.test(src)?"hls":"mp4":""},_this._setSizeForLowerDevice=function(video){var w=window.innerWidth,h=window.innerHeight,w_h=9/16,width=void 0,height=void 0;w/w_h>h?(width=w,height=w/w_h):(width=h*w_h,height=h),video.classList.add("setsize"),Object.assign(video.style,{width:parseInt(width)+"px",height:parseInt(height)+"px",left:-parseInt((width-w)/2)+"px",top:-parseInt((height-h)/2)+"px"})},_this.onPlay=function(){_this._dispatch("play")},_this.onPlaying=function(){_this._dispatch("playing")},_this.onTimeUpdate=function(){_this._dispatch("timeUpdate")},_this.onPause=function(){_this._dispatch("pause")},_this.onEnded=function(){_this._dispatch("ended")},_this.onError=function(e){var video=_this.video;console.log("video error: ",{currentTime:video.currentTime,code:ERR_MAP[video.error.code]||e}),_this._dispatch("error",e)},_this._dispatch=function(event){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var method="on"+event.replace(/^./,function(ch){return ch.toUpperCase()});_this.props[method]&&_this.props[method].apply(_this.props,args)},_this.isMZMXBrowser=/(MZ-MX)/i.test(navigator.userAgent)&&!_device2.default.isNow&&_device2.default.isAndroid&&!_device2.default.isWeixin&&!_device2.default.isQQ&&!_device2.default.isQQBrowser,_this.enableAutoPlay=!(_device2.default.isAndroid&&_device2.default.isWeixin),_this.useHlsjs="Win32"===navigator.platform,_this}return _inherits(Video,_Component),Video.prototype.componentDidMount=function(){var _this2=this;this.mounted=!0,this.useHlsjs&&(0,_nowScriptjs2.default)("//11.url.cn/now/lib/hls.min.js",function(){_this2.initHlsJs()})},Video.prototype.componentWillReceiveProps=function(nextProps){nextProps.src!==this.props.src&&this.hlsLoad(nextProps.src)},Video.prototype.componentDidUpdate=function(){this.mounted&&!this.doneSetSizeForLowerDevice&&(this.doneSetSizeForLowerDevice=!0,this.setSizeForLowerDevice())},Video.prototype.render=function(){var _this3=this,props=this.props,attrs=(this.state,_device2.default.isWeixin||_device2.default.isQQ||_device2.default.isQzone?{}:{"x5-video-player-type":"h5"});return _react2.default.createElement("video",_extends({ref:function(c){_this3.video=c},id:"mainvideo",preload:"auto",autoPlay:this.enableAutoPlay,style:Object.assign({zIndex:1},props.style),is:!0,"webkit-playsinline":!0,playsinline:!0},attrs,{src:this.useHlsjs&&"hls"===this.videoType()||!props.src?void 0:props.src,onLoadedMetadata:this.props.onLoadedMetadata,onTimeUpdate:this.onTimeUpdate,onPlay:this.onPlay,onPlaying:this.onPlaying,onPause:this.onPause,onError:this.onError,onEnded:this.onEnded}))},_createClass(Video,[{key:"duration",get:function(){return this.props.duration||this.video.duration||0}},{key:"buffered",get:function(){return this.video.buffered}},{key:"currentTime",get:function(){return this.video.currentTime},set:function(currentTime){this.video.currentTime=currentTime}},{key:"ended",get:function(){return this.video.ended}},{key:"error",get:function(){return this.video.error}},{key:"paused",get:function(){return this.video.paused}},{key:"readyState",get:function(){return this.video.readyState}}]),Video}(_react.Component);exports.default=Video},733:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_sandbox=__webpack_require__(7),_index=__webpack_require__(735),_index2=_interopRequireDefault(_index),_db=__webpack_require__(108),_db2=_interopRequireDefault(_db),VideoWrapper=function(_Component){function VideoWrapper(){var _ref,_temp,_this,_ret;_classCallCheck(this,VideoWrapper);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=VideoWrapper.__proto__||Object.getPrototypeOf(VideoWrapper)).call.apply(_ref,[this].concat(args))),_this.state={src:null,cover:null},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(VideoWrapper,_Component),_createClass(VideoWrapper,[{key:"componentDidMount",value:function(){var _this2=this;(new _db2.default).ajax({type:"get",url:"http://ivweb.io/proxy/?url="+encodeURIComponent("https://now.qq.com/cgi-bin/now/web/user/get_personal_live_rcmd_read?&num=19&tab_id=2"),withCredentials:!1}).then(function(data){var _data$result$data$=data.result.data[0],room_id=_data$result$data$.room_id,room_logo_url=_data$result$data$.room_logo_url;return _this2.setState({cover:room_logo_url}),(new _db2.default).ajax({type:"get",url:"http://ivweb.io/proxy/?url="+encodeURIComponent("https://now.qq.com/cgi-bin/now/web/room/get_live_room_url?is_sub_room=0&platform=8&playtype=4&room_id="+room_id),withCredentials:!1})},function(error){console.log(error)}).then(function(data){var src=data.result.videoURLList[0];_this2.setState({src:src})})}},{key:"render",value:function(){var _state=this.state,src=_state.src,cover=_state.cover;return src?_react2.default.createElement("div",{style:{height:"100%"}},_react2.default.createElement(_index2.default,{ref:"player",cover:cover,src:src})):null}}]),VideoWrapper}(_react.Component);exports.default=VideoWrapper,_sandbox.sandboxStore.add("video",VideoWrapper)},735:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();__webpack_require__(1580);var _react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(11),_classnames2=_interopRequireDefault(_classnames),_device=__webpack_require__(2),_device2=_interopRequireDefault(_device),_visibilityState=__webpack_require__(22),_visibilityState2=_interopRequireDefault(_visibilityState),_nowDisplayPlayer=__webpack_require__(216),_nowDisplayPlayer2=_interopRequireDefault(_nowDisplayPlayer),_nowBaseImage=__webpack_require__(37),_nowBaseImage2=_interopRequireDefault(_nowBaseImage),MAX_RETRY=2,Video=function(_React$Component){function Video(props){_classCallCheck(this,Video);var _this=_possibleConstructorReturn(this,(Video.__proto__||Object.getPrototypeOf(Video)).call(this,props));_this.getVideoSize=function(){var result={};if(_this.player){var _this$player$video=_this.player.video,videoWidth=_this$player$video.videoWidth,videoHeight=_this$player$video.videoHeight,_this$state=_this.state,width=_this$state.width,height=_this$state.height;videoWidth!=width&&videoHeight!=height&&(result.width=videoWidth,result.height=videoHeight,result.aspectRatio=videoHeight/videoWidth,_this.props.onGetVideoSize&&_this.props.onGetVideoSize({width:videoWidth,height:videoHeight}))}return result},_this.clickPlay=function(){_this.play()},_this.play=function(updateUrl){(_this.player.error||_this.player.ended||updateUrl)&&_this.updateUrl(),_this.player.play()},_this.updateUrl=function(){_this.props.onUpdateUrl&&_this.props.onUpdateUrl()},_this.onPlay=function(){_this.updateVideoInfo()},_this.onTimeUpdate=function(){_this.player.currentTime!==_this._lastTime&&(_this._lastTime=_this.player.currentTime,_this.updateVideoInfo(),_this.player.currentTime&&(_this.retryCount=0))},_this.onPause=function(){_this.updateVideoInfo()},_this.onEnded=function(){_this.updateVideoInfo()},_this.onError=function(e){_this.isNormal()&&_this.retryCount<MAX_RETRY?(console.log("retryCount"+_this.retryCount),_this.retryCount++,setTimeout(_this.retry,2e3)):_this.updateVideoInfo()},_this.onLoadedMetadata=function(){_this.updateVideoInfo()},_this.retry=function(){_visibilityState2.default.isHidden()||(console.log("retry",_this.retryCount),_this.updateUrl())},_this.checkVideoState=function(){if(!_visibilityState2.default.isHidden()){var player=_this.player,data=_this._checkVideoData=_this._checkVideoData||{};_this.supportCurrentTime&&!player.paused&&(player.currentTime===data.currentTime&&.001!==player.currentTime?_this.onBlock((Date.now()-data.timeUpdate)/1e3):(data.currentTime=player.currentTime,data.timeUpdate=Date.now()))}},_this.onBlock=function(second){console.log("block",second),second>20&&_this.isNormal()&&(console.log("block retry"),_this.play(!0))},_this.updateVideoInfo=function(){var player=_this.player,state=Object.assign({},_this.state),playing=!player.paused&&(player.currentTime&&player.currentTime>.2||.001===player.currentTime||!_this.supportCurrentTime&&4===player.readyState);!_this.props.serverPause||_this.state.serverPause||playing||(state.serverPause=!0),state.played=state.played||playing,(!state.autoPlay||state.played||player.error||player.ended)&&(state.paused=player.paused,state.loading=!player.paused&&!playing,state.playing=!player.paused&&playing),Object.assign(state,_this.getVideoSize()),_this.setState(state)};var autoPlay=_device2.default.isNow||_device2.default.isQQ&&!/(iPad|iPod)/gi.test(navigator.useAgent);return _this.supportCurrentTime=_device2.default.isIOS||_device2.default.isQQBrowser||_device2.default.isWeixin,_this.state={autoPlay:autoPlay,loading:autoPlay,played:!1,playing:!1,paused:!autoPlay,netPause:!1,serverPause:!1,width:0,height:0,aspectRatio:1},_this.retryCount=0,_this}return _inherits(Video,_React$Component),_createClass(Video,[{key:"shouldComponentUpdate",value:function(){return!0}},{key:"componentDidMount",value:function(){this.player=this.refs.player,_visibilityState2.default.on("change",this.visibilityChange=this.visibilityChange.bind(this)),this._checkVideoStateTask=setInterval(this.checkVideoState.bind(this),1e3),this.updateUrl()}},{key:"componentWillUnmount",value:function(){this.player=null,_visibilityState2.default.off("change",this.visibilityChange),this._checkVideoStateTask&&clearInterval(this._checkVideoStateTask)}},{key:"componentWillReceiveProps",value:function(nextProps){var _this2=this;nextProps.netPause!==this.props.netPause,nextProps.serverPause!==this.props.serverPause&&setTimeout(function(){_this2.player&&(_this2.setState({serverPause:nextProps.serverPause}),nextProps.serverPause||_visibilityState2.default.isHidden()||(console.log("restore from serverPause"),_this2.play(!0)))},25e3),nextProps.src!==this.props.src&&console.log("update src",nextProps.src)}},{key:"visibilityChange",value:function(){var _this3=this;_visibilityState2.default.isHidden()&&(clearInterval(this._visibilityTimer),this._visibilityTimer=setInterval(function(){_this3.player&&!_this3.player.paused&&(_this3.player.pause(),clearInterval(_this3._visibilityTimer))},1e3)),setTimeout(function(){_this3.player&&(_visibilityState2.default.isHidden()?_this3.player.pause():(clearInterval(_this3._visibilityTimer),_this3.player.play()))},200)}},{key:"isNormal",value:function(){return!(this.state.serverPause||this.props.serverPause||this.state.netPause||this.props.netPause||_visibilityState2.default.isHidden())}},{key:"getLoadingText",value:function(){return this.state.played&&this.state.netPause?"网络断开":this.state.played&&this.state.serverPause?"主播暂时离开，马上回来！":this.state.loading?"请稍候..":""}},{key:"render",value:function(){var props=this.props,state=this.state,loadingText=this.getLoadingText(),aspectRatio=(state.width,state.height,state.aspectRatio),_state$orientation=state.orientation,orientation=void 0===_state$orientation?0:_state$orientation,src=props.src,cover=props.cover,wrapStyle={},containerStyle={};aspectRatio<1&&0===orientation&&(wrapStyle.paddingTop=100*aspectRatio+"%",containerStyle.backgroundColor="#000");var videoStyle={};aspectRatio>1&&!window.IS_SERVER&&(window.innerHeight/window.innerWidth>aspectRatio?(videoStyle.height=window.innerHeight,videoStyle.width=Math.ceil(window.innerHeight/aspectRatio)):(videoStyle.width=window.innerWidth,videoStyle.height=Math.ceil(window.innerWidth*aspectRatio)));var wrapClass=(0,_classnames2.default)({"video-wrap":!0,landscape:aspectRatio<1&&0!==orientation,portrait:0===orientation,smallwindow:aspectRatio<1&&0===orientation});return _react2.default.createElement("section",{classNames:"livevideo-container",style:containerStyle},_react2.default.createElement("div",{className:wrapClass,style:wrapStyle},_react2.default.createElement(_nowDisplayPlayer2.default,{ref:"player",src:src,autoPlay:state.autoPlay,onPlay:this.onPlay,style:videoStyle,onTimeUpdate:this.onTimeUpdate,onLoadedMetadata:this.onLoadedMetadata,onPause:this.onPause,onError:this.onError,onEnded:this.onEnded})),state.played?null:_react2.default.createElement(_nowBaseImage2.default,{className:"bg",src:cover}),loadingText?_react2.default.createElement("div",{className:"loading"},_react2.default.createElement("div",{className:"img"}),loadingText):null,src&&state.paused&&!state.netPause&&!state.serverPause?_react2.default.createElement("div",{className:"play-btn icon-play",onClick:this.clickPlay}):null)}}]),Video}(_react2.default.Component);exports.default=Video},1179:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(),exports.push([module.id,'.livevideo-container{position:absolute;left:0;top:0;bottom:0;right:0;background-color:#000}.livevideo-container .video-wrap{position:absolute;left:0;top:0;bottom:0;right:0;overflow:hidden;z-index:0}.livevideo-container .video-wrap.landscape #mainvideo{max-height:100%;max-width:100%;top:50%;left:50%;transform:translate(-50%,-50%)}.livevideo-container .video-wrap.portrait #mainvideo{min-height:100%;min-width:100%;top:50%;left:50%;transform:translate(-50%,-50%)}.livevideo-container .video-wrap.portrait.smallwindow{bottom:auto;top:160px}.livevideo-container .video-wrap.portrait.smallwindow #mainvideo{max-height:100%;max-width:100%}.livevideo-container .bg{position:absolute;left:0;top:0;bottom:0;right:0;background-color:#9f8ea0;opacity:.99;background-repeat:no-repeat;background-position:50%;background-size:cover}.livevideo-container .play-btn{position:absolute;left:50%;top:50%;width:80px;height:80px;margin-left:-40px;margin-top:-40px}.livevideo-container .loading{position:absolute;top:0;left:0;bottom:0;right:0;display:-webkit-box;-webkit-box-orient:vertical;font-size:16px;color:#ddd;text-align:center;overflow:hidden;background-color:rgba(0,0,0,.4)}.livevideo-container .loading:after,.livevideo-container .loading:before{content:" ";display:block;-webkit-box-flex:1;visibility:hidden}.livevideo-container .loading .img{position:absolute;left:0;top:0;width:200%;height:187px;background-image:url('+__webpack_require__(1816)+");background-repeat:repeat-x;background-size:auto 187px;animation:loading-move 14s linear 0s infinite}.livevideo-container .icon-play{width:80px;height:80px;background:url("+__webpack_require__(1817)+");background-size:100% 100%}@keyframes loading-move{0%{transform:translateZ(0)}to{transform:translate3d(-50%,0,0)}}",""])},1580:[1842,1179],1816:function(module,exports){module.exports="data:image/png;base64,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"},1817:function(module,exports){module.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAACgCAMAAAC8EZcfAAABEVBMVEU1NTUAAAA0NDQ1NTUzMzNAQEA1NTUsLCw0NDQ2NjYpKSlBQUEzMzM0NDQ0NDQ2NjZpaWnLy8s2NjZKSkovLy80NDQzMzM9PT01NTU0NDRCQkIrKys4ODgwMDAvLy81NTU+Pj46OjozMzM7Ozs3NzdFRUU8PDw5OTk1NTVPT086Ojr///86Ojp8fHz///+7u7s4ODhKSkpXV1fIyMjy8vJISEj09PRhYWHx8fHd3d2Pj49vb28pKSllZWVeXl6Pj4+Li4vW1tZhYWHz8/PNzc20tLSFhYVDQ0NcXFxGRkZlZWWnp6fBwcH///9aWlrr6+vMzMzDw8Ofn5+amppqamrf399mZmZbW1ugoKCioqL///9uZT7uAAAAWnRSTlNNAE9OUANCRkg/QQ5MSkY5e9EvBko8NBFFHgtHE0xGKSEaUjIkGEoJK1Y4+igI9aYmIBew41TmWdjJh2pPHgx+es1p3bOmdz42LSsVDfNZ2MiqioV3y2pqoIr6WveUAAAGqklEQVR42uzWaXeaQBQG4Ns7SxiHpYUAQlBAoRqrrUn3Nk33fd/b/P8fUifmHFO7GGFS/dD3c455zr0vF+BM5TDGvJ5M8qhI3cDxfcF5056kybnwfSdw0yLKE9nzGGPV/0t1IOvFMinzbNif8MTEZlgWkEnAsoyJUkyI/WGWl4mMe4uE+oEsTvKi33WmczMsEwgiUtrpUIqIBEzLmM7S6faLPIkXELUCWU+GZdYPHG6QKecwcCxEZUomBneCflaGcsEctQFHSTTsOoLbBiDtTIAz4jwPD/8ADJsLpzuMktH8b2kHstGrl3fSQFhTFZwoU6slgvTOy1ejuTHqBTK58+LZU962kNITC49WjVabP332YkfOhJqBLA7LcdBo0T/BFkNpqxGMyzBmpwFkYeYORLu118FKQjXIzl6rLQZuFjLtQE+WQ8duzdEqMVu2MyylpxcY5/0BN1ST6gLVbxh80M9jfUDWCyOXm3PTqzVFk7tR2GN6gExGrm/D3PRqThFs340k0wH0kixoAiJoDSI0gyLx6gPj3BUGUP1ABEO4eVwT6Mmo20RK4BRCKDa7kfTqAL3d1LcJPSUgImn66a5XGchGu8+FiQinFkRTPN8dsYrA/Z0ut+jpAqnFuzv7lYBM7gwMXHBadOzZGOxIVgEoC8eg9PSBlBpOIZcGsnDsWwveHdreK5Y/DtlyQBamvrngvGg8N6afhmwZIEuGwqRA4J+EADXFMGFLAMO0wnmpeW7S8MRAJovF89M/w0KyEwJl4W9SCv80lG76hTwRkO1nToXnV8Oz7GT77ATAkbrPlMA/DqHqYo8WA73drlFhflpmaHR3vQXAie85rzA/TTPkz3e9BUCZCosgrCRILJHKvwPjyDcpIbCSEEJNJ4r/BvTyro0UVhb1jZ17fway0G0iElhZCJKmm7A/AuNMIIWVBlEU8k/AXhQYdNVAagyi3jxwtmAgBFYaQqDphux3QBZHPiCsPAh+1GO/AXq5a+M6ANF2c+83QJlyWA8g8FT+CmTl4PAbcOUhQM1ByeaBLBxypLAWociHIZsD9jLHWIcFT5dsOFlvDihdG8kaLPjow8t25c9AVjqwJgtWoeCU7DiQ7Y8bdJ2AtDHeZ8eAozvB1ro0cNrCreDO6Bjw1YvGHlknINlrvHh1DPjyWWsPyPIXy9poNDa2NrUDCey1nr2cAUd3nmIHKsSyNtpbmyboTwefqh1PgSxJKx1p07z69dOnB9vn2/qHSJGnCTsCelHQrtLAjc2v3969u3T3+nn9QCTtIPKOgPFQmFWOdGPr07sLB1cefb+9begeIiGmGMZHwLBrIVRIY+Ps/YODC9c+v7/7xtho6Z6h1Q2nQFY6SCsCzx1McvHho1tftDeRolMyBWRxJmgNoBJeu6m/iZSKLGYKmPQ5Yi3gZM8PH33Q3ERE3k8U0IsCm9QFqiZeuruts4lIbPUcA4sLx6gNVHu+obeJSAyniBkw2ecmIbWB0ybeu35+c1PboeF9ycBTR0YLUDXxsmrixlZLC1AdGg965QApgAagEl6ZDHG7ramJFAdlD2Tu044uoGri5VsPruppYof6uYQkE6gPqJp4/7GmJnZQZAnkY65rxbMmfjy8ia36XzTjHDJ1pnUC1U2cNtHUcKozKNymHqD+JiI23QLSwCbagQevr2hoonqXpOA6hn6g2vONSROvqptY613iQiAsQvQDZzfRrHGqLRGAw0EzcLbnek1ULu6A3yRagfNNfPKmchMnsKYPwtYPnOVijSYqoC1AGAiagfNNfLK9UamJBNAQwC3dwPkhvn2vmmi1qgAtfggEvcD5Jj48bGJreeEhsAm0PnDxEO++AQuWDp3wbNI5baBq4uUn24a5dBE7xNYDXJy3H66fN1v/gT+qu1ckhIEgCMMyJjgcR6AKCRLD/c+EQOCTnuTrM6SyO9uPf074xP5PMnrM/C+819Zjxj+o+auOHxb4cWtwYH0kBlZ/5OcfTfyzk3+489LHmHi0ZMQjX37jBcysBPyMS8BhEf3zE9GvORE9bEO84zaEb+TwVljCTLzPmYkNdixvaPuRAD9UwcdS+GDP9mjUerktg9Go/eGydTRc1hTP4wOOfESUD9n6MWU/6M1H5fmygV/X8AsvfGWIL135tTW/+OdXJ/nyqV/f9QvQfoWcL+H7GAMfBMGjNApgJDzOpQCIwyOFfCiTj7UqAIPxaLUCOB2P9ysAJPqIyQJIp4859UGxPmq3AVbs454LgNk+crwB2u5j7ysWB/irFyqWVxy2/uMLhBaeWLAEXJkAAAAASUVORK5CYII="},1842:function(module,exports,__webpack_require__,__webpack_module_template_argument_0__){var content=__webpack_require__(__webpack_module_template_argument_0__);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(4)(content,{});content.locals&&(module.exports=content.locals)}});
//# sourceMappingURL=20.0f091197aa2ec62bf1ac.bundle.js.map