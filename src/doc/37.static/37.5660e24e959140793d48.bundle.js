webpackJsonp([37],{11:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;!function(){"use strict";function classNames(){for(var classes=[],i=0;i<arguments.length;i++){var arg=arguments[i];if(arg){var argType=typeof arg;if("string"===argType||"number"===argType)classes.push(arg);else if(Array.isArray(arg))classes.push(classNames.apply(null,arg));else if("object"===argType)for(var key in arg)hasOwn.call(arg,key)&&arg[key]&&classes.push(key)}}return classes.join(" ")}var hasOwn={}.hasOwnProperty;"undefined"!=typeof module&&module.exports?module.exports=classNames:(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return classNames}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)))}()},47:function(module,exports){"use strict";var eventname={transitionEnd:"onwebkittransitionend"in window?"webkitTransitionEnd":"transitionEnd",animationEnd:"onwebkitanimationend"in window?"webkitAnimationEnd":"animationEnd",touchstart:"ontouchstart"in window?"touchstart":"mousedown",touchmove:"ontouchmove"in window?"touchmove":"mousemove",touchend:"ontouchend"in window?"touchend":"mouseup",touchcancel:"touchcancel",raf:window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(fn){return setTimeout(fn,60)}};module.exports=eventname},619:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_sandbox=__webpack_require__(7),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_index=__webpack_require__(621),_index2=_interopRequireDefault(_index);__webpack_require__(1550);var Preview=function(_Component){function Preview(){return _classCallCheck(this,Preview),_possibleConstructorReturn(this,(Preview.__proto__||Object.getPrototypeOf(Preview)).apply(this,arguments))}return _inherits(Preview,_Component),_createClass(Preview,[{key:"render",value:function(){return _react2.default.createElement(_index2.default,{className:"test-scroller"},_react2.default.createElement("div",{className:"div1"}),_react2.default.createElement("div",{className:"div2"}),_react2.default.createElement("div",{className:"div3"}))}}]),Preview}(_react.Component);exports.default=Preview,_sandbox.sandboxStore.add("scroller",Preview)},621:function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScrollerItem=void 0;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(11),_classnames2=_interopRequireDefault(_classnames),_eventname=__webpack_require__(47),_eventname2=_interopRequireDefault(_eventname);__webpack_require__(1551);var NEXT="NEXT",PREV="PREV",RESET="RESET",Scroller=(exports.ScrollerItem=function(_Component){function ScrollerItem(){var _ref,_temp,_this,_ret;_classCallCheck(this,ScrollerItem);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _temp=_this=_possibleConstructorReturn(this,(_ref=ScrollerItem.__proto__||Object.getPrototypeOf(ScrollerItem)).call.apply(_ref,[this].concat(args))),_this.defaultProps={group:"DEFAULT"},_ret=_temp,_possibleConstructorReturn(_this,_ret)}return _inherits(ScrollerItem,_Component),_createClass(ScrollerItem,[{key:"render",value:function(){return _react2.default.createElement("div",this.props,this.props.children)}}]),ScrollerItem}(_react.Component),function(_Component2){function Scroller(){_classCallCheck(this,Scroller);var _this2=_possibleConstructorReturn(this,(Scroller.__proto__||Object.getPrototypeOf(Scroller)).call(this));return _this2.defaultProps={showIndicator:!1},_this2.onTouchStart=function(e){if(_this2.touchEventReady){e.preventDefault();var touch=e.changedTouches?e.changedTouches[e.changedTouches.length-1]:e;_this2.isMoving=!0,_this2.moveCount=0,_this2.velocity=0,_this2.startTime=new Date,_this2.startX=touch.pageX,_this2.nowX=_this2.startX,_this2.nowTime=_this2.startTime}},_this2.onTouchMove=function(e){if(clearTimeout(_this2.touchEndTimer),e.preventDefault(),_this2.isMoving){var touch=e.changedTouches?e.changedTouches[e.changedTouches.length-1]:e,move=touch.pageX-_this2.nowX,nowTime=new Date;if(_this2.horizontalPosition-=move,_this2.velocity=move/(nowTime-_this2.startTime),_this2.nowX=touch.pageX,_this2.nowTime=nowTime,_this2.moveCount++,_this2.domScroller.classList.add("noanimation"),_this2.domIndicatorScoller&&_this2.domIndicatorScoller.classList.add("noanimation"),_this2.setScrollerTransform(_this2.horizontalPosition),_this2.indicatorCanMoveLeft&&_this2.horizontalPosition<=0||_this2.indicatorCanMoveRight&&_this2.horizontalPosition>=0){if(!_this2.domIndicatorScoller)return;_this2.setScrollerTransform(_this2.horizontalPosition,_this2.domIndicatorScoller)}_this2.touchEndTimer=setTimeout(function(){_this2.onTouchEnd(e)},300)}},_this2.onTouchEnd=function(e){if(clearTimeout(_this2.touchEndTimer),!_this2.isMoving)return void _this2.resetParams();_this2.isMoving=!1,_this2.domScroller&&_this2.domScroller.classList.remove("noanimation"),_this2.domIndicatorScoller&&_this2.domIndicatorScoller.classList.remove("noanimation");var touch=e.changedTouches?e.changedTouches[e.changedTouches.length-1]:e,endX=touch.pageX,totalMove=endX-_this2.startX;Math.abs(totalMove)>=_this2.domScroller.offsetWidth/2||Math.abs(_this2.velocity)>=.1?totalMove>0?_this2.props.loop||0!==_this2.state.currentIndex?_this2.prev():_this2.reset():totalMove<0&&(_this2.props.loop||_this2.state.currentIndex!==_this2.viewsCount-1?_this2.next():_this2.reset()):_this2.reset()},_this2.onScrollEnd=function(e){var newIndex=0;switch(_this2.domScroller.classList.add("noanimation"),_this2.domIndicatorScoller&&_this2.domIndicatorScoller.classList.add("noanimation"),_this2.horizontalPosition=0,_this2.setScrollerTransform(_this2.horizontalPosition),_this2.setScrollerTransform(_this2.horizontalPosition,_this2.domIndicatorScoller),_this2.resetParams(),_this2.scrollerState){case NEXT:newIndex=_this2.state.currentIndex+1,newIndex>=_this2.viewsCount&&(newIndex=0),_this2.setCurrentIndex(newIndex);break;case PREV:newIndex=_this2.state.currentIndex-1,newIndex<0&&(newIndex=_this2.viewsCount-1),_this2.setCurrentIndex(newIndex);break;case RESET:default:_this2.forceUpdate()}},_this2.setScrollerTransform=function(){var x=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_this2.horizontalPosition,dom=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_this2.domScroller,transformValue="translate3d("+-x+"px, 0, 0)";dom&&(dom.style.transform=transformValue,dom.style.webkitTransform=transformValue)},_this2.setCurrentIndex=function(){var newIndex=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_this2$state=_this2.state,currentIndex=_this2$state.currentIndex;_this2$state.currentGroup;newIndex!==_this2.state.currentIndex&&(_this2.setState({currentIndex:newIndex}),_this2.setCurrentGroup(newIndex),_this2.props.onIndexChange&&_this2.props.onIndexChange(newIndex,currentIndex))},_this2.setCurrentGroup=function(){var newIndex=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,_this2$state2=_this2.state,newCurrentGroup=(_this2$state2.currentIndex,_this2$state2.currentGroup,null);_this2.indicatorCanMoveLeft=!1,_this2.indicatorCanMoveRight=!1;var hasNewGroupIndex=_this2.groupList.some(function(group,groupIndex){return group.some(function(view,indexInGroup){if(view.index===newIndex)return newCurrentGroup=groupIndex,0===indexInGroup&&(_this2.indicatorCanMoveLeft=!0),indexInGroup===group.length-1&&(_this2.indicatorCanMoveRight=!0),!0})});hasNewGroupIndex&&_this2.setState({currentGroup:newCurrentGroup})},_this2.setTimer=function(){_this2.timer&&_this2.viewsCount<=1||(_this2.timer=setInterval(_this2.next,_this2.state.speed))},_this2.setViewsCount=function(){_this2.props.children&&(_this2.viewsCount=_this2.props.children.length)},_this2.setGroupList=function(views){_this2.groupList=_this2.getGroupList(views)},_this2.getGroupList=function(views){var gorupMap={},groupArray=[];return views.forEach(function(view,index){var viewGroup=view.props.group,groupArrayIndex=gorupMap[viewGroup];if("number"!=typeof groupArrayIndex){var group=[{view:view,index:index}];groupArray.push(group),gorupMap[viewGroup]=groupArray.length-1}else{var _group=groupArray[groupArrayIndex];_group.push({view:view,index:index})}}),groupArray},_this2.reset=function(){_this2.touchEventReady=!1,_this2.setScrollerTransform(0),_this2.setScrollerTransform(0,_this2.domIndicatorScoller),_this2.scrollerState=RESET},_this2.next=function(){_this2.touchEventReady=!1,_this2.setScrollerTransform(_this2.domScroller.offsetWidth),_this2.indicatorCanMoveRight&&_this2.setScrollerTransform(_this2.domScroller.offsetWidth,_this2.domIndicatorScoller),_this2.scrollerState=NEXT},_this2.prev=function(){_this2.touchEventReady=!1,_this2.setScrollerTransform(-_this2.domScroller.offsetWidth),_this2.indicatorCanMoveLeft&&_this2.setScrollerTransform(-_this2.domScroller.offsetWidth,_this2.domIndicatorScoller),_this2.scrollerState=PREV},_this2.resetParams=function(){_this2.horizontalPosition=0,_this2.touchEventReady=_this2.viewsCount>1},_this2.renderView=function(view,index){var currentIndex=_this2.state.currentIndex,style={position:"absolute",left:100*(index-currentIndex)+"%",width:document.body.offsetWidth,height:"100%",display:index>=currentIndex-1&&index<=currentIndex+1?"":"none"},className=view.props.className+" nd-scroll-view";return _react2.default.cloneElement(view,{className:className,style:style,key:index})},_this2.renderGroupList=function(){arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _this2.props.children.map(function(view,index){return _this2.renderView(view,index)})},_this2.timer=null,_this2.horizontalPosition=0,_this2.indicatorCanMoveLeft=!1,_this2.indicatorCanMoveRight=!1,_this2.state={currentGroup:0,currentIndex:0,speed:5e3},_this2}return _inherits(Scroller,_Component2),_createClass(Scroller,[{key:"componentWillMount",value:function(){this.props.index&&(this.state.index=this.props.index),this.setGroupList(this.props.children),this.setCurrentGroup(this.props.index),this.setViewsCount()}},{key:"componentDidMount",value:function(){this.mounted=!0,this.resetParams(),this.domScroller.addEventListener(_eventname2.default.transitionEnd,this.onScrollEnd),this.domScroller.addEventListener(_eventname2.default.touchstart,this.onTouchStart),this.domScroller.addEventListener(_eventname2.default.touchmove,this.onTouchMove),this.domScroller.addEventListener(_eventname2.default.touchend,this.onTouchEnd)}},{key:"componentWillReceiveProps",value:function(nextProps){this.setGroupList(nextProps.children),nextProps.children.length===this.viewsCount&&nextProps.index===this.props.index||(this.setCurrentIndex(nextProps.index),this.setViewsCount())}},{key:"componentWillUnMount",value:function(){this.domScroller.removeEventListener(_eventname2.default.transitionEnd,this.onScrollEnd)}},{key:"renderIndicator",value:function(groupList){var _state=this.state,currentGroup=_state.currentGroup,currentIndex=_state.currentIndex;return groupList.map(function(groupItems,index){var style={left:100*(index-currentGroup)+"%",display:index>=currentGroup-1&&index<=currentGroup+1?"":"none"};return groupItems.length>1?_react2.default.createElement("div",{className:"nd-indicator-group",key:index,style:style},_react2.default.createElement("div",{className:"nd-indicatorwrap"},groupItems.map(function(groupItem,index){var indicatorClass=(0,_classnames2.default)({select:currentIndex===groupItem.index,"nd-indicator":!0});return _react2.default.createElement("i",_defineProperty({key:index,className:indicatorClass},"key",index))}))):null})}},{key:"render",value:function(){var _this3=this,_props=this.props,_props$className=_props.className,className=void 0===_props$className?"":_props$className,_props$style=_props.style,style=void 0===_props$style?{}:_props$style;return _react2.default.createElement("div",{className:className,style:Object.assign({},style,{position:"relative"})},_react2.default.createElement("div",{ref:function(c){_this3.domScroller=c},className:"nd-scroller"},this.renderGroupList(this.groupList)),this.props.showIndicator?_react2.default.createElement("div",{className:"nd-indicator-scoller",ref:function(c){_this3.domIndicatorScoller=c}},this.renderIndicator(this.groupList)):null)}}]),Scroller}(_react.Component));exports.default=Scroller},1149:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(),exports.push([module.id,".test-scroller{width:100%;height:200px}.test-scroller .div1{background-color:red}.test-scroller .div2{background-color:#000}.test-scroller .div3{background-color:blue}",""])},1150:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(3)(),exports.push([module.id,".nd-scroller{position:absolute;top:0;left:0;width:100%;height:100%;transition:transform .3s;display:flex;flex-wrap:nowrap;align-items:flex-end}.nd-scroller.noanimation{transition:none}.nd-scroller .nd-scroller-group{display:flex;flex-wrap:nowrap;align-items:flex-end;height:100%}.nd-indicator-scoller{position:absolute;bottom:0;left:0;width:100%;transition:transform .3s}.nd-indicator-scoller.noanimation{transition:none}.nd-indicator-group{position:absolute;width:100%;bottom:6px;height:20px}.nd-indicatorwrap{position:absolute;bottom:6px;left:0;right:0;text-align:center;font-size:0;white-space:nowrap}.nd-indicatorwrap .nd-indicator{display:inline-block;width:4px;height:4px;margin-right:3px;margin-left:3px;position:relative;border-radius:4px;background-color:#ccc}.nd-indicatorwrap .nd-indicator.select{background-color:#777}",""])},1550:function(module,exports,__webpack_require__){var content=__webpack_require__(1149);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(4)(content,{});content.locals&&(module.exports=content.locals)},1551:function(module,exports,__webpack_require__){var content=__webpack_require__(1150);"string"==typeof content&&(content=[[module.id,content,""]]);__webpack_require__(4)(content,{});content.locals&&(module.exports=content.locals)}});
//# sourceMappingURL=37.5660e24e959140793d48.bundle.js.map